import{k as b,l as u,u as h,c as s,o as n,f as r,F as p,g as C,b as c,i as x,t as y,j as _,_ as I}from"./app--Vh3dkqs.js";const V={class:"post-images"},E=["src","onClick"],L={class:"viewer-image-container"},S=["src"],A={key:2,class:"viewer-indicator"},B=b({__name:"ImagePreview",props:{images:{type:Array,required:!0,validator:e=>e.every(i=>i.thumbnail&&i.large)}},setup(e){const i=e,l=u(!1),a=u(0),d=u("60");h(()=>{const t=document.querySelector(".navbar");t&&(d.value=window.getComputedStyle(t).height)});const k=t=>{a.value=t,l.value=!0,document.body.style.overflow="hidden"},v=()=>{l.value=!1,document.body.style.overflow=""},g=()=>{a.value=(a.value-1+i.images.length)%i.images.length},m=()=>{a.value=(a.value+1)%i.images.length};return h(()=>{const t=o=>{l.value&&(o.key==="Escape"?v():o.key==="ArrowLeft"?g():o.key==="ArrowRight"&&m())};return window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}}),(t,o)=>(n(),s("div",V,[(n(!0),s(p,null,C(e.images,(f,w)=>(n(),s("img",{key:w,src:f.thumbnail,alt:"朋友圈图片",class:"post-img",onClick:P=>k(w)},null,8,E))),128)),l.value?(n(),s("div",{key:0,class:"image-viewer",onClick:v},[c("div",{class:"viewer-content",onClick:o[0]||(o[0]=_(()=>{},["stop"]))},[c("button",{class:"viewer-close",onClick:v},"×"),e.images.length>1?(n(),s("button",{key:0,class:"viewer-prev",onClick:g}," ← ")):r("",!0),e.images.length>1?(n(),s("button",{key:1,class:"viewer-next",onClick:m}," → ")):r("",!0),c("div",L,[c("img",{src:e.images[a.value].large,alt:"大图预览",class:"viewer-image",style:x({maxHeight:`calc(100vh - ${d.value}px - 40px)`})},null,12,S)]),e.images.length>1?(n(),s("div",A,y(a.value+1)+" / "+y(e.images.length),1)):r("",!0)])])):r("",!0)]))}}),D=I(B,[["__scopeId","data-v-b4408b1f"]]);export{D as default};
